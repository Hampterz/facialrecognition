version: '3.8'

services:
  face-recognition:
    build: .
    container_name: face-recognition-app
    image: facialrecognition:latest
    
    # For GUI applications - use host display
    environment:
      - DISPLAY=${DISPLAY:-:0}
      - QT_X11_NO_MITSHM=1
    
    # Mount volumes for persistent data
    volumes:
      - ./training:/app/training
      - ./output:/app/output
      - ./validation:/app/validation
      - ./models:/app/models
      - /tmp/.X11-unix:/tmp/.X11-unix:rw
    
    # Network mode for host access
    network_mode: host
    
    # Device access for camera (Linux)
    devices:
      - /dev/video0:/dev/video0
    
    # Privileged mode for camera access (if needed)
    privileged: false
    
    # Keep container running
    stdin_open: true
    tty: true
    
    # Restart policy
    restart: unless-stopped

